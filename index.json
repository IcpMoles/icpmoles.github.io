[{"content":"I just use this blog as a space where to dump random stuff, no real direction or anything. The title of the blog is a pun on my surname inspired by Randall Munroe. At the moment I\u0026rsquo;m pursuing a Master in Automation Engineering, the \u0026ldquo;jack of all trades, master of none\u0026rdquo; of engineerings, which summarizes my general approach to life pretty well. ","tags":null,"time":1719187200,"title":"About","url":"/about/","wordcount":100},{"content":"Maybe I can put a banner on my website reminding people to install an adblocker, who knows. I need to see if I can detect DNS based adblockers without exposing IP of the viewer, maybe DNS prefetch? To view this page please enable an adblock or disable Javascript ","tags":null,"time":1719187200,"title":"Turn on your adblocker","url":"/adblock/","wordcount":100},{"content":"Hugo LunrJs MathJax KaTeX Classless.css concrete.css ","tags":[],"time":1717538400,"title":"Credits","url":"/credits/","wordcount":100},{"content":"Guide for Matteo Matteucci\u0026rsquo;s Robotics class at PoliMi Scope: to install the environment needed for the labs without having to deal with Docker or dual booting in Ubuntu. Target: PCs running Windows 10 or up supporting virtualization. Basic Installation First you need to set-up WSL in your machine. From a Windows command line run: powershell wsl update wsl install Ubuntu-20.04 And fill the username and password as you please. Now you should get a linux shell, in other case you can launch it from the start menu (simply search Ubuntu, it should also apper in the recently installed section) or from the dropdown menu of the terminal (my suggested method). Let\u0026rsquo;s update some packages as a precaution and then continue. bash sudo apt update sudo apt upgrade -y n.b: If you\u0026rsquo;re using the internal PoliMi Wifi you may get some errors, simply switching the Wifi from \u0026ldquo;Public Network\u0026rdquo; to \u0026ldquo;Private Network\u0026rdquo; should fix it. You may have to change it back once you\u0026rsquo;re done with this tutorial. Now we start dealing with the core ROS installation. These commands are taken from the Docker repository bash sudo apt-get update sudo apt-get install -q -y --no-install-recommends dirmngr gnupg2 sudo apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv-keys C1CF6E31E6BADE8868B172B4F42ED6FBAB17C654 sudo sh -c \u0026#39;echo \u0026#34;deb http://packages.ros.org/ros/ubuntu focal main\u0026#34; \u0026gt;\u0026gt; /etc/apt/sources.list.d/ros1-latest.list\u0026#39; sudo apt-get update sudo apt-get install -y --no-install-recommends ros-noetic-ros-core=1.5.0-1* source \u0026#34;/opt/ros/noetic/setup.bash\u0026#34; echo \u0026#34;source /opt/ros/noetic/setup.bash\u0026#34; \u0026gt;\u0026gt; ~/.bashrc These are the commands for the \u0026ldquo;base\u0026rdquo; ROS installation taken from here bash sudo apt-get update sudo apt-get install --no-install-recommends -y build-essential python3-rosdep python3-rosinstall python3-vcstools sudo rosdep init rosdep update --rosdistro noetic sudo apt-get update sudo apt-get install -y --no-install-recommends ros-noetic-ros-base=1.5.0-1* Now finally for the \u0026ldquo;perception\u0026rdquo; ROS package bash sudo apt-get update sudo apt-get install -y --no-install-recommends ros-noetic-perception=1.5.0-1* Basically in the Dockerfile shared in class what we just did was simply the first section. This is not a command!!!! dockerfile # Start from the ROS Noetic perception image FROM ros:noetic-perception Now we continue with the other installation commands: bash sudo apt-get update sudo apt-get install -y --no-install-recommends nano vim tmux gedit ros-noetic-rqt* net-tools iproute2 ros-noetic-plotjuggler* ros-noetic-foxglove-bridge ros-noetic-turtlesim ros-noetic-tf* Update for lesson 7 and onwards bash sudo apt-get update sudo apt-get install -y --no-install-recommends ros-noetic-stage* ros-noetic-gmapping ros-noetic-slam-toolbox* ros-noetic-move-base* ros-noetic-amcl ros-noetic-global-planner ros-noetic-dwa-local-planner ros-noetic-navfn ros-noetic-turtlebot3-* ros-noetic-teleop-twist-keyboard ros-noetic-pointcloud-to-laserscan You should already be in the home directory but just in case: bash mkdir -p ~/catkin_ws/src cd ~/catkin_ws/ ln -s /opt/ros/noetic/share/catkin/cmake/toplevel.cmake src/CMakeLists.txt catkin_make echo \u0026#34;source ~/catkin_ws/devel/setup.bash\u0026#34; \u0026gt;\u0026gt; ~/.bashrc To test it: In three different tabs execute these commands in this order: bash roscore rosrun turtlesim turtlesim_node rosrun turtlesim turtle_teleop_key Now your ROS developement environment is fully functioning, so we can just \u0026ldquo;clone\u0026rdquo; the distro to be able to interact in a multihost configuration. Write down your Ubuntu username, it\u0026rsquo;s just the name of the account that we setup in the first step. It also appears before the @ in your shell. bash sudo nano /etc/wsl.conf Now we have to modify the text file into this: conf [boot] systemd=true [user] default=UsernameThatIJustToldYouToWriteDOwn And now just CTRL + O to save, same name,CTRL + X to exit. Quality of life improvements (you can skip this) If you want an easier tmux experience with mouse support (like scrolling for output history, click to change pane, etc) and color: bash cd $HOME touch ~/.tmux.conf echo \u0026#34;setw -g mouse on\u0026#34; \u0026gt;\u0026gt; ~/.tmux.conf echo \u0026#34;setw -g default-terminal \u0026#34;tmux-256color\u0026#34;\u0026#34; \u0026gt;\u0026gt; ~/.tmux.conf Cloning Now create an empty folder in a place of your liking (possibly in a disk with at least 20Gb) Open a Powershell terminal in that folder and type: powershell wsl --shutdown wsl.exe --export Ubuntu-20.04 UbuntuRosBck.tar Just wait\u0026hellip;. If everything went correctly then you can type in the same terminal: powershell wsl.exe --import UbuntuRosSecondary ./filesystemsecondary UbuntuRosBck.tar Wait, again. As soon as the process is complete we can just launch the instance with powershell wsl.exe --distribution UbuntuRosSecondary Now we have two identical WSL instances that we can launch from the start menu or from the terminal drop down. How your Terminal dropdown should look like Now, going back to the directory where we exported the backup at the start of this step we have two big files: UbuntuRosBck.tar and filesystem\\ext4.vhdx Precaution when moving the generated files pt. 1 For filesystem\\ext4.vhdx: DON\u0026rsquo;T TOUCH, MOVE OR DELETE IT. It contains all your data. Precaution when moving the generated files pt. 2 For UbuntuRosBck.tar instead you can either delete it or you can also share it with your friends. Sharing is Caring UbuntuRosBck.tar basically contain a full linux distro with all the ROS packages already installed. You can transfer it on their PC and then in an empty folder just run: powershell wsl.exe --import UbuntuRosPrimary ./filesystemprimary UbuntuRosBck.tar wsl.exe --import UbuntuRosSecondary ./filesystemsecondary UbuntuRosBck.tar Ideally this should just run™ Be mindful to not put anything personal or harmful inside and to give them the password you used in the first step. It\u0026rsquo;s technically a local VM so it shouldn\u0026rsquo;t bee too much of a risk from that point of view. Just in case it\u0026#39;s not clear Your WSL password, not your Windows password Also, like for the previous section: please never delete the filesystemprimary\\ext4.vhdx and filesystemsecondary\\ext4.vhdxfiles but you can delete UbuntuRosBck.tar file without causing problems. Testing With this configuration you don\u0026rsquo;t have to fiddle with Master IPs and such like for Docker. To test it just run like this: bash roscore rosrun turtlesim turtlesim_node rosrun turtlesim turtle_teleop_key Turtlesim running on multiple machines ","tags":["Ubuntu","ROS"],"time":1709146903,"title":"How to setup ROS Noetic in WSL through Ubuntu 20.04 Focal","url":"/posts/ros-polimi/","wordcount":900},{"content":"What is the state of MathML in 2023? Can we finally use it and forget about MathJax or Katex for the time being? Let\u0026rsquo;s try something simple: I\u0026rsquo;m going to put a Latex expression and see how Katex compares to \u0026ldquo;raw\u0026rdquo; MathML code generated by the coutless renderers you can find online: Latex Code: Show Latex Code latex \\vec x \\equal \\begin{bmatrix} \\begin{pmatrix} 1 \u0026amp; 2 \u0026amp; 3\\\\ a \u0026amp; b \u0026amp; c \\end{pmatrix} \u0026amp; \\begin{pmatrix} 4 \u0026amp; 5 \u0026amp; 6\\\\ d \u0026amp; e \u0026amp; f \\end{pmatrix} \\\\ \\begin{pmatrix} 6 \u0026amp; 5 \u0026amp; 4\\\\ z \u0026amp; y \u0026amp; x \\end{pmatrix} \u0026amp; \\begin{pmatrix} 3 \u0026amp; 2 \u0026amp; 1\\\\ r \u0026amp; s \u0026amp; t \\end{pmatrix} \\end{bmatrix} \\begin{bmatrix} \\pi \\\\ \\pi/2 \\\\ \\frac{\\pi}{3} \\\\ 3\\pi \\\\ \\pdv{f}{t} \\\\ \\alpha \\end{bmatrix} + \\vec {z^T} \\vec g \\begin{bmatrix} \\begin{pmatrix} 1 \u0026amp; 2 \u0026amp; 3\\\\ a \u0026amp; b \u0026amp; c \\end{pmatrix} \u0026amp; \\begin{pmatrix} 4 \u0026amp; 5 \u0026amp; 6\\\\ d \u0026amp; e \u0026amp; f \\end{pmatrix} \\\\ \\begin{pmatrix} 6 \u0026amp; 5 \u0026amp; 4\\\\ z \u0026amp; y \u0026amp; x \\end{pmatrix} \u0026amp; \\begin{pmatrix} 3 \u0026amp; 2 \u0026amp; 1\\\\ r \u0026amp; s \u0026amp; t \\end{pmatrix} \\end{bmatrix} \\begin{bmatrix} \\pi \\\\ \\pi/2 \\\\ \\frac{\\pi}{3} \\\\ 3\\pi \\\\ \\pdv{f}{t} \\\\ \\alpha \\end{bmatrix} + \\sum_{i=\\vec {x_0}}^{\\vec {x_n}}g(\\vec x_i)\\Lambda_2 Katex Rendering $$ \\vec x = \\begin{bmatrix}\\begin{pmatrix}1 \u0026 2 \u0026 3\\\\a \u0026 b \u0026 c\\end{pmatrix}\u0026\\begin{pmatrix}4 \u0026 5 \u0026 6\\\\d \u0026 e \u0026 f\\end{pmatrix}\\\\\\begin{pmatrix}6 \u0026 5 \u0026 4\\\\z \u0026 y \u0026 x\\end{pmatrix}\u0026\\begin{pmatrix}3 \u0026 2 \u0026 1\\\\r \u0026 s \u0026 t\\end{pmatrix}\\end{bmatrix}\\begin{bmatrix}\\pi \\\\ \\pi/2 \\\\ \\frac{\\pi}{3} \\\\ 3\\pi \\\\ \\frac{\\partial f}{\\partial t} \\\\ \\alpha\\end{bmatrix}+\\vec {z^T} \\vec g\\begin{bmatrix}\\begin{pmatrix}1 \u0026 2 \u0026 3\\\\a \u0026 b \u0026 c\\end{pmatrix}\u0026\\begin{pmatrix}4 \u0026 5 \u0026 6\\\\d \u0026 e \u0026 f\\end{pmatrix}\\\\\\begin{pmatrix}6 \u0026 5 \u0026 4\\\\z \u0026 y \u0026 x\\end{pmatrix}\u0026\\begin{pmatrix}3 \u0026 2 \u0026 1\\\\r \u0026 s \u0026 t\\end{pmatrix}\\end{bmatrix}\\begin{bmatrix}\\pi \\\\ \\pi/2 \\\\ \\frac{\\pi}{3} \\\\ 3\\pi \\\\ \\frac{\\partial f}{\\partial t} \\\\ \\alpha\\end{bmatrix}+ \\sum_{i=\\vec {x_0}}^{\\vec {x_n}}g(\\vec x_i)\\Lambda_2 $$ MathML with default font family x → = [ ( 1 2 3 a b c ) ( 4 5 6 d e f ) ( 6 5 4 z y x ) ( 3 2 1 r s t ) ] [ π π ⁄ 2 π 3 3 π ∂ f ∂ t α ] + z T → g → [ ( 1 2 3 a b c ) ( 4 5 6 d e f ) ( 6 5 4 z y x ) ( 3 2 1 r s t ) ] [ π π ⁄ 2 π 3 3 π ∂ f ∂ t α ] + ∑ i = x 0 → x n → g ( x → i ) Λ 2 They should render pretty similar depending on your browser. For example on Windows 11 it works \u0026ldquo;fine\u0026rdquo; on both Chrome and Firefox while on Android I\u0026rsquo;ve encountered some errors in Chrome. What if we wanted to change the font to have a better control and fix some of the shortcomings of default fonts? My choice went on Asana, Firamath, GFSNeohellenicMath, Stix 2 and TEX Gyre Schola: Font family: Asana x → = [ ( 1 2 3 a b c ) ( 4 5 6 d e f ) ( 6 5 4 z y x ) ( 3 2 1 r s t ) ] [ π π ⁄ 2 π 3 3 π ∂ f ∂ t α ] + z T → g → [ ( 1 2 3 a b c ) ( 4 5 6 d e f ) ( 6 5 4 z y x ) ( 3 2 1 r s t ) ] [ π π ⁄ 2 π 3 3 π ∂ f ∂ t α ] + ∑ i = x 0 → x n → g ( x → i ) Λ 2 Font family: Firamath x → = [ ( 1 2 3 a b c ) ( 4 5 6 d e f ) ( 6 5 4 z y x ) ( 3 2 1 r s t ) ] [ π π ⁄ 2 π 3 3 π ∂ f ∂ t α ] + z T → g → [ ( 1 2 3 a b c ) ( 4 5 6 d e f ) ( 6 5 4 z y x ) ( 3 2 1 r s t ) ] [ π π ⁄ 2 π 3 3 π ∂ f ∂ t α ] + ∑ i = x 0 → x n → g ( x → i ) Λ 2 Font family: FSNeohellenicMath x → = [ ( 1 2 3 a b c ) ( 4 5 6 d e f ) ( 6 5 4 z y x ) ( 3 2 1 r s t ) ] [ π π ⁄ 2 π 3 3 π ∂ f ∂ t α ] + z T → g → [ ( 1 2 3 a b c ) ( 4 5 6 d e f ) ( 6 5 4 z y x ) ( 3 2 1 r s t ) ] [ π π ⁄ 2 π 3 3 π ∂ f ∂ t α ] + ∑ i = x 0 → x n → g ( x → i ) Λ 2 Font family: STIXTwo x → = [ ( 1 2 3 a b c ) ( 4 5 6 d e f ) ( 6 5 4 z y x ) ( 3 2 1 r s t ) ] [ π π ⁄ 2 π 3 3 π ∂ f ∂ t α ] + z T → g → [ ( 1 2 3 a b c ) ( 4 5 6 d e f ) ( 6 5 4 z y x ) ( 3 2 1 r s t ) ] [ π π ⁄ 2 π 3 3 π ∂ f ∂ t α ] + ∑ i = x 0 → x n → g ( x → i ) Λ 2 Font family: TexGyreSchola x → = [ ( 1 2 3 a b c ) ( 4 5 6 d e f ) ( 6 5 4 z y x ) ( 3 2 1 r s t ) ] [ π π ⁄ 2 π 3 3 π ∂ f ∂ t α ] + z T → g → [ ( 1 2 3 a b c ) ( 4 5 6 d e f ) ( 6 5 4 z y x ) ( 3 2 1 r s t ) ] [ π π ⁄ 2 π 3 3 π ∂ f ∂ t α ] + ∑ i = x 0 → x n → g ( x → i ) Λ 2 The parenthesys behaviour on the multiline parts is a bit heptic on Chrome, on the other hand Firefox works fine with all of them. The problem with Firefox is that it doesn\u0026rsquo;t recognize the max-width=100% and overflow: auto hidden so it goes beyond the page layout in the MathML sections, while Katex works just fine. If you know if that\u0026rsquo;s a bug in Firefox or an error of mine please get in touch with me. One solution might be to try to keep all the math parts as compact as possible while using one of the working fonts but that\u0026rsquo;s really limiting tbh. For now I decided to reamain on client-side Katex with default output settings, despite the overhead of the JS library the user experience and mantainability is just better that way. ","tags":["mathml","katex"],"time":1701012243,"title":"The dire state of MathML support","url":"/posts/mathml-support/","wordcount":1300},{"content":"A simple method to calculate the static preload in a lumped body multi Degrees of Freedom system tl,dr: Final Formula Given a system of springs and bodies in degrees of freedom, we can calculate the static preload of our springs at equilibrium by: $$ \\vec {\\Delta l_o} = [A]^{-1}[b] $$ with \\( \\vec {\\Delta l_o} \\) as the vector of our ordered solution, with $$ [A]=[\\lambda_k]^T[k_{ph}]$$ and $$[b]=-g[\\lambda_g]^T\\vec m_{ph} $$ \\([\\lambda_k]\\) is our standard lagrangian matrix for the springs, \\([\\lambda_g]\\) instead is built by selecting the components of vertical displacement from \\([\\lambda_m]\\) (lagrangian matrix of the inertial terms) and \\(\\vec m_{ph}\\) as the list of masses in column form. Proof 1-DOF case Let\u0026rsquo;s start by defining our problem. is our free coordinate, so we have: $$ V(x) = V_k(x) + V_g(x) $$ is the potential energy of our system and it can be divided into an elastic component \\( V_k \\) and a gravitational component \\( V_g \\). The equilibrium is defined as the point so that $$ \\frac{\\partial V}{\\partial x}\\rvert_{x_0}=0 $$ $$ \\frac{\\partial V_k}{\\partial x}\\rvert_{x_0}+\\frac{\\partial V_g}{\\partial x}\\rvert_{x_0}=0 $$ To simplify our math let\u0026rsquo;s suppose that \\(x_0=0\\) (it\u0026rsquo;s a simple change of coordinates that will help in the N-dof case). The first step is to derive the components of the potential energy: Elastic energy 1-dof describes the energy stored in an ideal linear spring with Hooke\u0026rsquo;s coefficient subject to a deformation \\( \\Delta l\\) $$ V_k(x) = \\sum_{i=1}^{s} \\frac{1}{2} k_i \\Delta l_i^2(x) $$ We can ignore the index for now and express \\( \\Delta l (x)\\) as \\( \\Delta l(x) = l(x) - l_r \\), with \\(l(x)\\) as the total length of our spring and as the initial length of the spring at resting position, thus giving us the convention of positive sign for tension and negative sign for compression of our spring. We can expand it as: $$ \\Delta l(x) \\approx \\Delta l(0) + \\frac{\\partial \\Delta l }{\\partial x}\\rvert_{x=0} x +\\frac{1}{2}\\frac{\\partial^2 \\Delta l }{\\partial x^2}\\rvert_{x=0} x^2 =\\Delta l_0 + \\lambda_k(0)x + \\frac{1}{2}\\nu_k(0)x^2 $$ We are going to square and derive this expression, so every term of with power greater or equal than two \\( \\{ x^n : n\\geq 2 \\} \\) is going to show up as a function of \\(x^{n-1}\\) and when evaluated at \\(x=0\\) they simply dissapear. $$ \\Delta l(x)\\rvert_{x=0} \\approx \\Delta l_0 + \\lambda_k(0)x = \\Delta l_0 + \\lambda_{k0} x $$ When putting it back into the sum we get: $$ V_k(x) \\rvert_{x=0} \\approx \\sum_{i=1}^{s} \\frac{1}{2} k_i (\\Delta l_{i0} + \\lambda_{ik0} x )^2 = \\sum_{i=1}^{s} \\frac{1}{2} k_i (\\Delta l_{i0}^2 + \\lambda_{ik0}^2 x^2 + 2 \\Delta l_{i0} \\lambda_{ik0} x ) $$ Let\u0026rsquo;s evaluate the derivative in respect to : \\(\\Delta l_0^2\\) is a constant and gets eliminated by the derivative, the other sqare term becomes \\(\\lambda_{k0}^2 x\\) and goes to zero when evaluated at \\(x=0\\), so only the mixed term \\(2\\Delta l_o \\lambda_{k0} x\\) survives and the derivative becomes: $$ \\frac {\\partial V_k }{\\partial x}\\rvert_{x=0}= \\sum_{i=1}^s k_i \\Delta l_{i0} \\lambda_{ik0} $$ We can rewrite this in vector form as: $$ [k_{ph}] = diag(k_1; k_2; ... ; k_s) $$ $$ \\vec {\\Delta l_0 } = [ \\Delta l_{10}; \\Delta l_{20}; ... ; \\Delta l_{s0}] $$ $$ \\vec \\lambda_{k} = [\\lambda_{1k};\\lambda_{2k};...;\\lambda_{sk}] $$ $$ \\frac{\\partial V_g(x)}{\\partial x}\\rvert_{x=0} = \\vec \\lambda_{k}^T [k_{ph}] \\vec {\\Delta l_0 } $$ Gravitational energy 1-dof $$ V_g(x) = g \\sum_{j=1}^n m_j h_j(x) $$ This expresses the total gravitational energy in our system supposing bodies with mass and height measured from an arbitrary system of coordinates. Applying the same concepts as the elastic term we get: $$ h(x)\\rvert_{x=0} \\approx h(x)\\rvert_{0}+\\frac{\\partial h}{\\partial x}\\rvert_{0}x+\\frac{1}{2}\\frac{\\partial^2 h}{\\partial x^2}\\rvert_{0} x^2 $$ Let\u0026rsquo;s focus on the lower order terms and we get: $$ h(x)\\rvert_{x=0} \\approx h_{0}+\\lambda_gx$$ In this context \\(\\lambda_g\\) is the linearized displacement of the height at equilibrium. $$ V_g(x) = g \\sum_{j=1}^n m_j (h_{j0}+\\lambda_{jg}x) $$ Deriving it we get $$ \\frac{\\partial V_g(x)}{\\partial x}\\rvert_{x=0}=g \\sum_{j=1}^n m_j \\lambda_{jg} $$ Let\u0026rsquo;s put everything in vector form $$ \\vec {m_{ph}} = \\begin{bmatrix} m_1 \\\\ m_2 \\\\ \\vdots \\\\ m_n \\end{bmatrix} $$ $$ \\vec \\lambda_{g} = \\begin{bmatrix} \\lambda_{1g} \\\\ \\lambda_{2g}\\\\ \\vdots \\\\ \\lambda_{ng} \\end{bmatrix} $$ $$ \\frac{\\partial V_g(x)}{\\partial x}\\rvert_{x=0} = g \\vec \\lambda_{g}^T \\vec {m_{ph}} $$ Final expression $$ \\frac{\\partial V_k}{\\partial x}\\rvert_{x_0}+\\frac{\\partial V_g}{\\partial x}\\rvert_{x_0}=0 $$ $$ \\vec \\lambda_{k}^T [k_{ph}] \\vec {\\Delta l_0 } + g \\vec \\lambda_{g}^T \\vec {m_{ph}} = 0 $$ To find \\( \\vec {\\Delta l_0 } \\) we just rearrange it as: $$ \\vec {\\Delta l_0 } = -g(\\vec \\lambda_{k}^T [k_{ph}])^{-1} \\vec \\lambda_{g}^T \\vec {m_{ph}} = [A]^{-1}\\vec b $$ N-DOF case We follow the same procedure but now we have additional dimensions for our \\(\\vec x\\): $$ \\vec x = \\begin{bmatrix} x_1 \\\\ x_2 \\\\ \\vdots \\\\ x_N \\end{bmatrix} $$ So we need to evaluate the gradient of our potential energy funcion for the equilibrium: $$ \\frac{\\partial V(\\vec x)}{\\partial \\vec x}\\rvert_{\\vec x= \\vec 0} = \\begin{bmatrix} \\frac{\\partial V(\\vec x)}{\\partial x_1} \\\\ \\frac{\\partial V(\\vec x)}{\\partial x_2} \\\\ \\vdots \\\\ \\frac{\\partial V(\\vec x)}{\\partial x_N} \\end{bmatrix}\\rvert_{\\vec x= \\vec 0} =\\vec 0$$ $$ \\nabla V(\\vec x)\\rvert_{\\vec x= \\vec 0} = \\nabla V_k(\\vec x)\\rvert_{\\vec x= \\vec 0} + \\nabla V_g(\\vec x)\\rvert_{\\vec x= \\vec 0} = \\vec 0$$ Elastic energy $$ V_k (\\vec x)=\\frac{1}{2}\\sum_{i=1}^{s}k_i\\Delta l_i^2(\\vec x) = \\frac{1}{2} \\vec{\\Delta l_0}^T (\\vec x) k_{ph} \\vec{\\Delta l_0(\\vec x)} $$ with $$ k_{ph}=diag(k1,k2,...,ks)$$ $$ \\vec{\\Delta l_0}(\\vec x) = \\begin{bmatrix} \\Delta l_{10}(\\vec x) \\\\ \\Delta l_{20}(\\vec x) \\\\ \\vdots \\\\ \\Delta l_{N0}(\\vec x) \\end{bmatrix} $$ As usual we expand our \\(\\Delta l(\\vec x)\\) near the equilibrium: $$ \\vec{\\Delta l(\\vec x)} \\rvert_{\\vec x=\\vec 0} \\approx \\vec {\\Delta l(\\vec 0)} + \\frac{\\partial \\Delta l }{\\partial \\vec x}\\rvert_{\\vec x= \\vec 0} \\vec x +\\frac{1}{2}\\frac{\\partial^2 \\Delta l }{\\partial x^2}\\rvert_{\\vec x= \\vec 0} \\vec x^2 = \\vec{\\Delta l_0} + [\\lambda_k(0)]\\vec x + \\frac{1}{2}\\vec x^T[\\nu_k(0)]\\vec x $$ and we simplify it as: $$ \\vec{\\Delta l(\\vec x)}\\rvert_{\\vec x=\\vec 0} \\approx \\vec{\\Delta l_0} + [\\lambda_k(0)] \\vec x = \\vec{\\Delta l_0} + [\\lambda_{k0}] \\vec x $$ Plugging it into the initial equation we get: $$ V_k (\\vec x) \\rvert_{\\vec x=\\vec 0} \\approx \\frac{1}{2} (\\vec {\\Delta l_{0}} + [\\lambda_{k0}] \\vec x)^T [k_{ph}] (\\vec {\\Delta l_{0}} + [\\lambda_{k0}] \\vec x) = $$ $$ = \\frac{1}{2}( \\vec x^T[\\lambda_{k0}]^T [k_{ph}] [\\lambda_{k0}] \\vec x + \\vec {\\Delta l_{0}}^T[k_{ph}] \\vec {\\Delta l_{0}} + \\vec {\\Delta l_{0}}^T[k_{ph}] [\\lambda_{k0}] \\vec x + \\vec x^T[\\lambda_{k0}]^T [k_{ph}] \\vec {\\Delta l_{0}} ) $$ Like for our 1-DOF case the only terms that survive the gradient are the mixed ones: $$ \\nabla V_k\\rvert_{\\vec x= \\vec 0}= \\frac{\\partial V_k}{\\partial \\vec x} (\\vec x) \\rvert_{\\vec x=\\vec 0} \\approx \\frac{1}{2} (\\vec {\\Delta l_{0}}^T[k_{ph}] [\\lambda_{k0}] + [\\lambda_{k0}]^T [k_{ph}] \\vec {\\Delta l_{0}} ) = [\\lambda_{k0}]^T [k_{ph}] \\vec {\\Delta l_{0}} $$ N.b. For \\( x,y \\in \\mathbb{R}\\_{n,1} \\) and \\( [S] \\in \\mathbb{R}_{n,n} \\). Then \\( x^T[S]y \\) is just a scalar. So: $$ (x^T[S]y)^T=x^T[S]y $$ If \\([S]\\) is symmetric: $$ x^T[S]y=(x^T[S]y)^T=y^T[S]^Tx=y^T[S]x $$ Gravitational Energy This must be straightforward now if you understood the past passages but for completeness let\u0026rsquo;s write them down: $$ V_g(\\vec x) = g \\vec h(\\vec x)^T \\vec {m_{ph}} $$ with $$ \\vec m_{ph}= \\begin{bmatrix} m_1 \\\\ m_2 \\\\ \\vdots \\\\ m_n \\end{bmatrix} $$ $$ \\vec h(\\vec x) = \\begin{bmatrix} h_1(\\vec x) \\\\ h_2(\\vec x) \\\\ \\vdots \\\\ h_n(\\vec x) \\end{bmatrix} $$ Expanding the height we get: $$ \\vec h(\\vec x)\\rvert_{\\vec x=\\vec 0} \\approx \\vec h(\\vec x)\\rvert_{\\vec 0}+\\frac{\\partial \\vec h}{\\partial \\vec x}\\rvert_{\\vec 0}\\vec x+\\frac{1}{2}\\frac{\\partial^2 h}{\\partial \\vec x \\partial \\vec x}\\rvert_{\\vec 0} \\vec x^2 = \\vec h_0 + [\\lambda_k(0)]\\vec x+ \\frac{1}{2}\\vec x^T[\\nu_k(0)]\\vec x$$ Picking just the linear and terms we get: $$ \\vec h(\\vec x)\\rvert_{\\vec x=\\vec 0} \\approx \\vec h_{0}+[\\lambda_g]\\vec x$$ Transposing and putting it back in the original energy expression we get: $$ V_g(\\vec x)\\rvert_{\\vec 0} = g ( \\vec h_0^T + \\vec x^T [\\lambda_g]^T)\\vec {m_{ph}} $$ Deriving it we get $$ \\nabla V_g\\rvert_{\\vec x= \\vec 0} = \\frac{\\partial V_g(\\vec x)}{\\partial \\vec x}\\rvert_{x=0}=g [\\lambda_g]^T \\vec{m_{ph}} $$ Final formula $$ \\nabla V\\rvert_{\\vec x= \\vec 0} = \\nabla V_k\\rvert_{\\vec x= \\vec 0} + \\nabla V_g\\rvert_{\\vec x= \\vec 0} = 0 $$ $$ [\\lambda_{k0}]^T [k_{ph}] \\vec {\\Delta l_{0}} = -g [\\lambda_g]^T \\vec{m_{ph}} $$ $$ \\text{let } [A]=[\\lambda_{k0}]^T [k_{ph}] $$ $$ \\text{let } \\vec b = -g [\\lambda_g]^T \\vec{m_{ph}} $$ $$ \\vec {\\Delta l_{0}} = [A]^{-1}\\vec b $$","tags":["Dynamics of Mechanical Systems"],"time":1700340243,"title":"Static Preload","url":"/posts/static-preload/theory/","wordcount":1400},{"content":"While developing my GIF shortcode for Hugo I stumbled upon a weird behaviour from various browsers. The story12 goes like: If you want to use videos instead of GIFs to save on bandwith for your users you can just use something like: html \u0026lt;video autoplay loop muted playsinline\u0026gt; \u0026lt;source src=\u0026#34;cat.webm\u0026#34; type=\u0026#34;video/webm\u0026#34;\u0026gt; \u0026lt;source src=\u0026#34;cat.mp4\u0026#34; type=\u0026#34;video/mp4\u0026#34;\u0026gt; \u0026lt;img src=\u0026#34;cat.gif\u0026#34;/\u0026gt; \u0026lt;/video\u0026gt; The \u0026lt;img src=\u0026quot;cat.gif\u0026quot;/\u0026gt; will behave like a fallback for browsers not supporting the video element or the provided formats. Just use ffmpeg to convert GIFs to MP4 and/or webm and you will have a couple of decades of video encoders developement to show animated cats in the fastest way possible. But no, even if your noble intents to show animated cats to your visitors while saving their bandwith seem completed there is a problem: With the code showed above all the browsers will download the video file AND the gif file, throwing outside the window your bandwith saving intents and making it worse because you\u0026rsquo;re forcing your visitors to download an additional file, no matter how small it is. You can try it directly Notice the programming.gif file being downloaded before the video file As you see in the screen above the browser still downloads the \u0026ldquo;fallback\u0026rdquo; GIF. This behaviour doesn\u0026rsquo;t seem widely reported in the \u0026ldquo;use videos instead of gifs\u0026rdquo; guides, staying relegated to some StackOverflow discussions 34. How should you resolve this? Don\u0026rsquo;t provide an \u0026lt;img\u0026gt;, just link to the GIF and ask them to update the browser to something more \u0026ldquo;modern\u0026rdquo;.5 html \u0026lt;video autoplay loop muted playsinline\u0026gt; \u0026lt;source src=\u0026#34;cat.webm\u0026#34; type=\u0026#34;video/webm\u0026#34;\u0026gt; \u0026lt;source src=\u0026#34;cat.mp4\u0026#34; type=\u0026#34;video/mp4\u0026#34;\u0026gt; \u0026lt;p\u0026gt;In case you browser doesn\u0026#39;t support video files open the \u0026lt;a target=\u0026#34;_blank\u0026#34; href=\u0026#34;cat.gif\u0026#34;\u0026gt;GIF\u0026lt;/a\u0026gt; in another page\u0026lt;/p\u0026gt; \u0026lt;/video\u0026gt; Fix stuff server side, check the UA and provide the \u0026lt;video\u0026gt; instead of the \u0026lt;img\u0026gt; or viceversa depending on it. If your content is statically rendered then it won\u0026rsquo;t work. The \u0026lt;!--[if lt IE 9]\u0026gt;6. This will work because the only main browsers not supporting the video elements are the Internet Explorer previous to the 9th and Opera Mini. Your code will just be html \u0026lt;video autoplay loop muted playsinline\u0026gt; \u0026lt;source src=\u0026#34;cat.webm\u0026#34; type=\u0026#34;video/webm\u0026#34;\u0026gt; \u0026lt;source src=\u0026#34;cat.mp4\u0026#34; type=\u0026#34;video/mp4\u0026#34;\u0026gt; \u0026lt;!--[if lt IE 9]\u0026gt;\u0026lt;img src=\u0026#34;cat.gif\u0026#34;/\u0026gt;\u0026lt;![endif]--\u0026gt; \u0026lt;/video\u0026gt; No GIF fallback. Really. At the time of writing those IE versions account for a 0,06% of the broswer share. Opera Mini is a bit more used (1,19%) but I think that CanIUse uses the UA to calculate the browser usage regardless of the type of data saving enabled, while for the tests it uses the aggressive server rendering option. In the worst case scenario the 1,25% of your visitors will have a degraded experience without the animated cats. Being more realistics I will say that even before the lack of animated cats those 1,25% will have a bad time in 2021 to reach your website between expired certificates, unsupported protocols, etc. (Try downloading an old Firefox version to see it by yourself). Improve Animated GIF Performance With HTML5 Video\u0026#160;\u0026#x21a9;\u0026#xfe0e; Optimizing Animated GIFs by Converting to HTML5 Video\u0026#160;\u0026#x21a9;\u0026#xfe0e; HTML5 fallback images are being loaded by the browser, even though HTML5 video is supported\u0026#160;\u0026#x21a9;\u0026#xfe0e; \u0026ldquo;Note: In my browser at least, the image inside is still fetched and loaded\u0026rdquo;\u0026#160;\u0026#x21a9;\u0026#xfe0e; Reducing the Size of Animated GIFs and Converting Them to WebM or MP4 Through Automation\u0026#160;\u0026#x21a9;\u0026#xfe0e; Keenly on StackOverflow\u0026#160;\u0026#x21a9;\u0026#xfe0e; ","tags":["gif","video","html","fallback"],"time":1633441277,"title":"The unrequested GIF","url":"/posts/gif-fallback/","wordcount":600},{"content":"For whatever reason your browser is locked out from changing the DoH settings? Here is how to change the settings if you have admin permissions. It happened to me to buy a new laptop. This laptop comes with all the usual OEM stuff to manage security and updates. One of those software scans every downloaded file and marks its origin. To do that the software enables the GroupPolicyUsers and installs an extension. Ok, cool but now whenever I want to change some Chrome (or even Firefox) settings I\u0026rsquo;m greeted with this message: Since I wanted to use my NextDNS account I had to fix this. First try was removing the User Policy by using a simble bash script found somewhere online bash @echo off IF NOT EXIST %WINDIR%\\\\System32\\\\GroupPolicy goto next echo Deleting GroupPolicy folder... RD /S /Q \u0026#34;%WINDIR%\\\\System32\\\\GroupPolicy\u0026#34; || goto error echo. :next IF NOT EXIST %WINDIR%\\\\System32\\\\GroupPolicyUsers goto next2 echo Deleting GroupPolicyUsers folder... RD /S /Q \u0026#34;%WINDIR%\\\\System32\\\\GroupPolicyUsers\u0026#34; || goto error echo. :next2 gpupdate /force pause exit :error echo. echo An unexpected error has occurred. ¨Have opened the program as an administrator (right click, run as administrator)? echo. pause exit Look at all the delete folder commands so close to System32, that absolutely doesn\u0026rsquo;t make nervous. But this resetted at every boot. A more robust soultion was needed. Removing the OEM security software? I was afraid of breaking some weird software integration with the fingerprint and boot security software. 😅 Now the final solution: If you can\u0026rsquo;t remove the User Policy use it. Looking up about the various admin policies on the Google Chrome website it\u0026rsquo;s possibile to find the ones useful for us: DnsOverHttpsMode and DnsOverHttpsTemplates. Just set DnsOverHttpsMode to secure or automatic depending if you want it to not have an insecure fallback. Then DnsOverHttpsTemplates you need to fill your DoH provider. The Chrome Policy is a bit confusing but you just need to take the https URL and add /dns-query{?dns} after it (better explaination). So if NextDNS provides you with https://dns.nextdns.io/123abc your URL to fill is https://dns.nextdns.io/123abc/dns-query{?dns} Here is a list of various DoH providers with everything already filled in: Provider Standard Family Protection AdGuard https://dns.adguard.com/dns-query{?dns} https://dns-family.adguard.com/dns-query{?dns} Cloudflare https://cloudflare-dns.com/dns-query{?dns} https://family.cloudflare-dns.com/dns-query{?dns} Google https://dns.google/dns-query{?dns} NA OpenDNS https://doh.opendns.com/dns-query{?dns} https://doh.familyshield.opendns.com/dns-query{?dns} Quad91 https://dns.quad9.net/dns-query{?dns} NA Bot how to enable it? You can edit manual through regedit or you can copy this code in a new file and save it with a .reg extension. You can directly insert your DNS of choice in place of the default Google one. registry Windows Registry Editor Version 5.00 [HKEY_LOCAL_MACHINE\\SOFTWARE\\Policies\\Google\\Chrome] \u0026#34;DnsOverHttpsTemplates\u0026#34;=\u0026#34;https://dns.google/dns-query{?dns}\u0026#34; \u0026#34;DnsOverHttpsMode\u0026#34;=\u0026#34;automatic\u0026#34; Be aware that they provide different hostnames with different features like ECS etc. Quad9\u0026#160;\u0026#x21a9;\u0026#xfe0e; ","tags":["dns over https","doh","chrome"],"time":1620378187,"title":"Enable DoH when Chrome is managed","url":"/posts/chrome-doh/","wordcount":500},{"content":"Given the various choices of hosting for your static files you may be unsure which one to pick. These are the features and performances of the top three services with their free tier. Features Github Pages Cloudflare Pages Netflify Multiple subomains1 ❌ Max 10 Infinite Custom subdomains Fixed to [github username].github.io Fixed to [github repo name].pages.dev *.netlify.app Ease of Setup Low High High SSLlabs score A B A Byte Serving for video ✅ ❌ 2 ✅ Monthly Bandwith 100GB n/a 100GB Builds limits 10 builds per hour 500 times per month 300 minutes per month Maximum file size 100 MB 25 MB n/a Storage Size 5 GB n/a 100 GB Build Previews ❌ ✅ ✅ Test Build: Hugo 1597 ms 1320 ms 1852 ms Test Build: Total 33s 58s 40s Download times: 4.252 Kb HTML 3 239 ms 245ms 492 ms As you can see from the table and from the graph, downloading the test file usually takes 200-250ms on Github Pages and Cloudflare, while on Netlify the times as 2 times longer with a more unreliable time for the latter. All three offer you to use your own domain name.\u0026#160;\u0026#x21a9;\u0026#xfe0e; Probably they do it to avoid abuse and to not compete with the Cloudflare Stream products.\u0026#160;\u0026#x21a9;\u0026#xfe0e; Average of 200 tests with httpstat against a test page\u0026#160;\u0026#x21a9;\u0026#xfe0e; ","tags":["hugo","hosting","rendering","CI/CD","github pages","netlify","github","cloudflare"],"time":1620158850,"title":"Hugo rendering: Github Pages vs Netlify vs Cloudflare Pages","url":"/posts/hosting-comparisons/","wordcount":300},{"content":"This blog doesn\u0026rsquo;t collect analytics of any sort by it\u0026rsquo;s own. The blog relies on third party services to work properly: GitHub Pages I host this blog on GitHub Pages (hosted and controlled by Microsoft) which has its own privacy policy. Up until August 2020 they described it as follows: If you create a GitHub Pages website, it is your responsibility to post a privacy statement that accurately describes how you collect, use, and share personal information and other visitor information, and how you comply with applicable data privacy laws, rules, and regulations. Please note that GitHub may collect User Personal Information from visitors to your GitHub Pages website, including logs of visitor IP addresses, to comply with legal obligations, and to maintain the security and integrity of the Website and the Service. Other third parties In case of embedded content your browser is also subject to other services with different privacy policies. The blog is configured to request the most basic and privacy preserving version of the embedded content that it supports. To discover more check the CMS page about it.. The site is configured to use the strictest referrer policy possible when linking to external websites when possible. For services of Web tipping (Flattr, Brave Rewards) that rely on the browser (or an extension) recognizing a meta tag in the code of the blog and then reporting the usage statistics to their infrastructure, it\u0026rsquo;s specified in their privacy policy that they store locally information about your interaction with the website and then send this information in anonymized form. You can learn more in their respective websites: Flattr, Brave Rewards. ","tags":[],"time":1598133600,"title":"Privacy Policy","url":"/privacy/","wordcount":300},{"content":"","tags":null,"time":-62135596800,"title":"Posts Archive","url":"/archives/","wordcount":100},{"content":"","tags":null,"time":-62135596800,"title":"Search","url":"/search/","wordcount":100}]